<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DreamOracle â€” Ä°letiÅŸim / RÃ¼ya GÃ¶nder</title>
  <meta name="description" content="DreamOracle: RÃ¼ya yorumcusu ve kiÅŸisel yaÅŸam koÃ§luÄŸu. RÃ¼yanÄ± gÃ¶nder, e-posta kutuna yorum gelsin." />
  <link rel="icon" href="/favicon.svg" />

  <style>
    :root{
      --bg:#0b1220;        /* sayfa arka planÄ± (koyu) */
      --panel:#101a2b;     /* kart/panel rengi */
      --muted:#8aa1c1;     /* ikincil metin */
      --text:#e6eefc;      /* ana metin */
      --brand:#58a6ff;     /* vurgu */
      --ok:#1aa86b;        /* baÅŸarÄ±lÄ± */
      --err:#ff6b6b;       /* hata */
      --panel-border:#1f2b42;
      --panel-shadow:0 10px 30px rgba(0,0,0,.35);
      --input:#0c1526;
      --input-border:#2b3a58;
      --input-focus:#2f74ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%, #11203c 0%, transparent 60%) , var(--bg);
      color:var(--text);
    }
    .container{max-width:1100px; margin:40px auto; padding:0 20px}
    .header{
      display:flex; align-items:center; gap:12px; margin-bottom:18px; opacity:.9;
      font-weight:600; letter-spacing:.2px;
    }
    .logo{width:28px; height:28px; border-radius:7px; background:linear-gradient(135deg,#67b3ff,#6f7dff); display:inline-block}
    .subtitle{color:var(--muted); font-weight:500; font-size:14px}

    .grid{
      display:grid; grid-template-columns: 1.2fr .8fr; gap:28px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns: 1fr}
    }

    .card{
      background:var(--panel);
      border:1px solid var(--panel-border);
      border-radius:16px;
      padding:22px;
      box-shadow:var(--panel-shadow);
    }
    h1{margin:0 0 14px; font-size:32px; letter-spacing:.2px}
    p.lead{margin:0 0 18px; color:var(--muted)}
    label{display:block; font-size:13px; color:#b9c7de; margin-bottom:8px}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    @media (max-width:620px){ .row{grid-template-columns: 1fr} }

    input,select,textarea,button{
      width:100%; border-radius:12px; border:1px solid var(--input-border);
      background:var(--input); color:var(--text); outline:none; font-size:15px;
    }
    input,select{height:48px; padding:0 14px}
    textarea{min-height:180px; padding:12px 14px; resize:vertical}
    input:focus,select:focus,textarea:focus{border-color:var(--input-focus); box-shadow:0 0 0 3px rgba(47,116,255,.18)}

    .hint{margin:6px 0 0; font-size:12px; color:var(--muted)}

    .btn{
      margin-top:14px; height:50px; border:none; cursor:pointer; font-weight:700; letter-spacing:.2px;
      background:linear-gradient(180deg,#5ba6ff,#3c7fe8); color:#fff;
      box-shadow:0 8px 20px rgba(60,127,232,.35);
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}

    .aside h3{margin:0 0 8px}
    .aside .badge{display:inline-block; background:#0e2a52; border:1px solid #27406a; color:#9ac0ff; font-size:12px; padding:4px 8px; border-radius:999px; margin-bottom:8px}
    ul.perks{margin:10px 0 0 0; padding:0 0 0 20px; color:#c7d6ec}
    ul.perks li{margin:8px 0}

    .alert{
      display:none; margin-top:14px; border-radius:12px; padding:12px 14px; font-size:14px; border:1px solid transparent;
    }
    .alert.success{display:block; background:rgba(26,168,107,.12); border-color:#1aa86b; color:#8be0bd}
    .alert.error{display:block; background:rgba(255,107,107,.12); border-color:#ff6b6b; color:#ffb4b4}

    .footnote{margin-top:16px; color:#9db0cc; font-size:12px}
    a.link{color:#8cbcff; text-underline-offset:3px}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <span class="logo" aria-hidden="true"></span>
      <div>
        <div>DreamOracle</div>
        <div class="subtitle">AI RÃ¼ya Yorumcusu & KiÅŸisel Rehber</div>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: FORM -->
      <section class="card">
        <h1>RÃ¼yanÄ± GÃ¶nder</h1>
        <p class="lead">
          Formu doldur, e-posta kutuna yanÄ±t gelsin. Ä°stersen â€œPremium Yorumâ€ seÃ§ â†’ daha detaylÄ±, yaÅŸam koÃ§luÄŸu baÄŸlamÄ±nda yorumlansÄ±n.
        </p>

        <form id="dream-form" novalidate>
          <div class="row">
            <div>
              <label for="name">Ad Soyad</label>
              <input id="name" name="name" type="text" placeholder="Ad Soyad" autocomplete="name" />
            </div>
            <div>
              <label for="email">E-posta</label>
              <input id="email" name="email" type="email" placeholder="ornek@mail.com" autocomplete="email" required />
            </div>
          </div>

          <div class="row" style="margin-top:14px">
            <div>
              <label for="paket">Paket</label>
              <select id="paket" name="paket">
                <option value="Standart">Standart RÃ¼ya Yorumu (Ã¼cretsiz)</option>
                <option value="Premium">Premium Yorum + KoÃ§luk</option>
              </select>
            </div>
            <div>
              <label for="oncelik">Ã–ncelik</label>
              <select id="oncelik" name="oncelik">
                <option value="Genel yorum">Genel yorum</option>
                <option value="Ä°ÅŸ/para">Ä°ÅŸ / para</option>
                <option value="AÅŸk/iliÅŸki">AÅŸk / iliÅŸki</option>
                <option value="Aile">Aile</option>
                <option value="Kariyer">Kariyer</option>
              </select>
            </div>
          </div>

          <div style="margin-top:14px">
            <label for="mesaj">RÃ¼yanÄ±z</label>
            <textarea id="mesaj" name="mesaj" placeholder="RÃ¼yanÄ± mÃ¼mkÃ¼n olduÄŸunca detaylÄ± yaz. Yer, kiÅŸiler, hissettiklerin, tekrar eden sembollerâ€¦"></textarea>
            <div class="hint">PaylaÅŸÄ±lan iÃ§erik gizlidir; public olarak gÃ¶sterilmez.</div>
          </div>

          <button type="submit" id="submitBtn" class="btn">GÃ¶nder â†’</button>

          <div id="form-alert" class="alert"></div>

          <div class="footnote">
            Form Ã§alÄ±ÅŸmÄ±yorsa <a class="link" href="mailto:uzumcu661@gmail.com">uzumcu661@gmail.com</a> adresine manuel e-posta atabilirsin.
          </div>
        </form>
      </section>

      <!-- RIGHT: INFO -->
      <aside class="card aside">
        <span class="badge">Yeni</span>
        <h3>Premium Yorum + KoÃ§luk</h3>
        <p class="lead" style="margin-bottom:10px">
          RÃ¼yandaki sembolleri gÃ¼nlÃ¼k hayatÄ±nla eÅŸleÅŸtirip aksiyon Ã¶nerisi istiyorsan bu alanÄ± seÃ§.
          KÄ±saca â€œÅŸimdi ne yapmalÄ±yÄ±m?â€ sorusuna cevap verir.
        </p>

        <ul class="perks">
          <li><b>Terapi deÄŸil, yÃ¶nlendirme.</b> RÃ¼ya â†’ bilinÃ§altÄ± â†’ bugÃ¼n ne yapacaÄŸÄ±m zinciri.</li>
          <li><b>24 saat iÃ§inde cevap.</b> Form bize ulaÅŸtÄ±ÄŸÄ±nda mail relay Ã§alÄ±ÅŸÄ±r (Gmail / Script).</li>
          <li><b>Koruma / enerji yorumu.</b> Ä°stersen eklenecek modÃ¼l.</li>
        </ul>

        <div class="alert error" style="margin-top:18px">
          API ÅŸu anda GET kabul etmiyor ama sorun deÄŸil, POST ile gÃ¶ndereceÄŸiz.
        </div>
      </aside>
    </div>
  </div>

  <script>
    const form = document.getElementById("dream-form");
    const alertBox = document.getElementById("form-alert");
    const btn = document.getElementById("submitBtn");

    function showAlert(type, msg){
      alertBox.style.display = "block";
      alertBox.className = "alert " + (type === "ok" ? "success" : "error");
      alertBox.textContent = msg;
    }

    form.addEventListener("submit", async function(e){
      e.preventDefault();
      showAlert("ok", "GÃ¶nderiliyorâ€¦ lÃ¼tfen bekle.");
      btn.disabled = true;
      btn.style.opacity = .7;

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const paket = document.getElementById("paket").value;
      const oncelik = document.getElementById("oncelik").value;
      const mesaj = document.getElementById("mesaj").value.trim();

      if(!email){
        showAlert("err","E-posta zorunlu alan.");
        btn.disabled = false; btn.style.opacity = 1; return;
      }

      try{
        const resp = await fetch("/api/send-email", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({ name, email, paket, oncelik, mesaj })
        });

        const data = await resp.json();

        // Bu API debugging modunda; 200 dÃ¶nse bile 'ok' alanÄ±na bakÄ±yoruz.
        if (data && data.ok) {
          showAlert("ok", "RÃ¼yan ulaÅŸtÄ±. E-postanÄ± kontrol edebilirsin. ğŸ‘");
          form.reset();
        } else {
          // Konsola tÃ¼m detayÄ± bas â†’ bize screenshot/JSON gÃ¶nderebilirsin
          console.log("DEBUG /api/send-email response:", data);
          const detail =
            (data && (data.reason || data.scriptStatus || data.fetchError)) ?
              ` (detay: ${data.reason || data.scriptStatus || data.fetchError})` : "";
          showAlert("err", "Sunucu cevap verdi ama mail gitmedi" + detail + ". Konsolu kontrol et.");
        }
      }catch(err){
        showAlert("err", "Ä°stek sÄ±rasÄ±nda hata: " + err);
      }finally{
        btn.disabled = false;
        btn.style.opacity = 1;
      }
    });
  </script>
</body>
</html>
